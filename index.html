<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>AI-Investor – מניות חמות בזמן אמת</title>

  <!-- CSS ממוזג -->
  <style>
  :root{
    --bg0:#05080d; --bg1:#0a121b; --card:#0e1621cc; --border:#243244;
    --txt:#e6edf3; --muted:#95a7b8; --pos:#22c55e; --neg:#ef4444; --accent:#60a5fa;
    --glow: 0 0 40px rgba(96,165,250,.15), 0 0 80px rgba(96,165,250,.08);
  }
  *{box-sizing:border-box} html,body{height:100%}
  body{
    margin:0; color:var(--txt);
    background:
      radial-gradient(1200px 800px at 80% -10%, #0d2137 0%, transparent 60%),
      radial-gradient(1000px 900px at -10% 120%, #13283f 0%, transparent 65%),
      linear-gradient(180deg, var(--bg0), var(--bg1));
    font-family: "Segoe UI", system-ui, Arial;
    overflow-x:hidden;
  }
  .app-header,.app-footer{
    display:flex; align-items:center; justify-content:space-between;
    padding:18px 28px; backdrop-filter: blur(8px);
    background: linear-gradient(180deg, #0d1520aa, #0d152088);
    border-bottom:1px solid #162233; box-shadow: var(--glow);
  }
  .app-footer{
    border-top:1px solid #162233; border-bottom:none;
  }
  .brand{font-weight:800; letter-spacing:.6px; font-size:22px}
  .container{padding:24px}
  .grid{
    display:grid; gap:18px;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    margin-right: 320px; /* מפנה מקום לפאנל הצ'אט */
  }
  .card{
    position:relative; background: var(--card);
    border:1px solid var(--border); border-radius:18px; padding:16px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35), var(--glow);
    overflow:hidden; transition: transform .25s ease, box-shadow .25s ease, border-color .25s ease;
  }
  .card::after{
    content:""; position:absolute; inset:-2px; pointer-events:none;
    background: radial-gradient(300px 120px at 10% -20%, rgba(96,165,250,.2), transparent 40%);
    mix-blend-mode: screen;
  }
  .card:hover{ transform: translateY(-4px); border-color:#385270; }
  .row1{display:flex; align-items:baseline; gap:8px}
  .ticker{font-size:18px; font-weight:700}
  .name{font-size:14px; color:var(--muted)}
  .row2{display:flex; align-items:baseline; gap:12px; margin-top:8px}
  .price{font-size:26px; font-weight:800; letter-spacing:.3px}
  .change{font-weight:700}
  .change.pos{color:var(--pos)} .change.neg{color:var(--neg)}
  .row3{display:flex; gap:8px; margin-top:10px; color:var(--muted); font-size:12px}
  .badge{background:#162233; padding:4px 10px; border-radius:999px; border:1px solid #233245}
  .source{opacity:.9}
  .row4{display:flex; gap:12px; align-items:center; margin-top:10px}
  .score{font-size:18px; font-weight:800}
  .trend{font-size:18px; opacity:.9}
  .actions{margin-top:12px}
  .btn{
    background: linear-gradient(180deg,#0f1e30,#0c1724);
    border:1px solid #2a3e56; color:var(--txt);
    padding:8px 12px; border-radius:12px; cursor:pointer; font-weight:600;
    transition: transform .15s ease, filter .2s, border-color .2s;
  }
  .btn:hover{ filter:brightness(1.12); border-color:#41648b }
  .btn:active{ transform:scale(.98) }
  .reason{margin-top:10px; color:var(--muted); font-size:12px; line-height:1.5}
  .spark{height:36px; margin-top:8px; opacity:.92}

  /* Chat panel (fixed, futuristic) */
  .chat{
    position: fixed; top: 0; right: 0; width: 300px; height: 100%;
    background: linear-gradient(180deg, #0a1522cc, #0a1320cc);
    border-left: 1px solid #1f3044;
    box-shadow: -10px 0 30px rgba(0,0,0,.35), var(--glow);
    display:flex; flex-direction:column;
    backdrop-filter: blur(8px);
  }
  .chat-header{
    padding:14px 16px; font-weight:800; border-bottom:1px solid #1f3044;
    display:flex; gap:8px; align-items:center;
  }
  .chat-body{
    flex:1; padding:12px; overflow:auto; display:flex; flex-direction:column; gap:8px;
  }
  .chat-msg{
    padding:8px 10px; border:1px solid #2a3e56; border-radius:12px; background:#0f1e30aa; max-width: 90%;
    white-space: pre-wrap; line-height:1.35;
  }
  .chat-msg.me{ align-self:flex-start; background:#17273aaa }
  .chat-msg.ai{ align-self:flex-end; border-color:#41648b }
  .chat-input{
    display:flex; gap:8px; padding:12px; border-top:1px solid #1f3044;
  }
  .chat-input input{
    flex:1; padding:10px 12px; border-radius:12px; border:1px solid #2a3e56; background:#0f1e30; color:var(--txt);
  }
  .chat-input button{ min-width:72px }

  /* 🔹 עיצוב גלגל שיניים לטעינה */
  .loader {
    position: fixed;
    top: 0; left: 0; right: 0;
    padding: 10px;
    background: linear-gradient(90deg, #0ea5e9, #0284c7);
    color: white;
    font-weight: bold;
    text-align: center;
    font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.2);
    animation: glow 2s ease-in-out infinite alternate;
  }
  .spinner {
    display: inline-block;
    width: 18px;
    height: 18px;
    border: 2px solid #fff;
    border-top: 2px solid transparent;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
  @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
  @keyframes glow { from { box-shadow: 0 0 8px #38bdf8; } to { box-shadow: 0 0 16px #7dd3fc; } }
  </style>
</head>

<body>
  <!-- 🔹 גלגל שיניים שמוצג בזמן טעינה -->
  <div id="loader" class="loader">
    <div class="spinner"></div>
    <span>מתחבר ל־Yahoo Finance...</span>
  </div>

  <header class="app-header">
    <div class="brand">AI-Investor</div>
    <div class="last" id="lastUpdated">...</div>
  </header>

  <main class="container">
    <section id="grid" class="grid"></section>
  </main>

  <aside class="chat" aria-label="AI Chat">
    <div class="chat-header">🤖 עוזר AI</div>
    <div id="chatBody" class="chat-body"></div>
    <div class="chat-input">
      <input id="chatInput" placeholder="כתוב שאלה על המניות שמופיעות עכשיו…" />
      <button id="chatSend" class="btn">שלח</button>
    </div>
  </aside>

  <footer class="app-footer">
    <small>⚠️ המידע הוא לצרכי מחקר בלבד, לא ייעוץ השקעות.</small>
  </footer>

  <script src="index.client.js"></script>
</body>
</html>
